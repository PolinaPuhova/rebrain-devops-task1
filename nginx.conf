{\rtf1\ansi\ansicpg1251\cocoartf2761
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fmodern\fcharset0 Courier-Bold;\f1\fmodern\fcharset0 Courier;\f2\fmodern\fcharset0 Courier-Oblique;
}
{\colortbl;\red255\green255\blue255;\red12\green95\blue24;\red234\green234\blue234;\red38\green38\blue38;
\red50\green91\blue142;\red51\green109\blue125;\red29\green111\blue63;\red171\green67\blue203;\red80\green157\blue203;
\red28\green64\blue117;}
{\*\expandedcolortbl;;\cssrgb\c0\c43922\c12549;\cssrgb\c93333\c93333\c93333;\cssrgb\c20000\c20000\c20000;
\cssrgb\c25098\c43922\c62745;\cssrgb\c25098\c50196\c56471;\cssrgb\c12549\c50196\c31373;\cssrgb\c73333\c37647\c83529;\cssrgb\c37647\c67843\c83529;
\cssrgb\c13725\c32549\c53333;}
\paperw11900\paperh16840\margl1440\margr1440\vieww11520\viewh8400\viewkind0
\deftab720
\pard\pardeftab720\partightenfactor0

\f0\b\fs28\fsmilli14400 \cf2 \cb3 \expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 user
\f1\b0\fs21\fsmilli10800 \cf4 \strokec4        
\fs28\fsmilli14400 \cf5 \strokec5 www
\fs21\fsmilli10800 \cf4 \strokec4  
\fs28\fsmilli14400 \cf5 \strokec5 www\cf4 \strokec4 ;
\fs21\fsmilli10800   
\f2\i\fs28\fsmilli14400 \cf6 \strokec6 ## Default: nobody
\f1\i0\fs21\fsmilli10800 \cf4 \strokec4 \

\f0\b\fs28\fsmilli14400 \cf2 \strokec2 worker_processes
\f1\b0\fs21\fsmilli10800 \cf4 \strokec4   
\fs28\fsmilli14400 \cf7 \strokec7 5\cf4 \strokec4 ;
\fs21\fsmilli10800   
\f2\i\fs28\fsmilli14400 \cf6 \strokec6 ## Default: 1
\f1\i0\fs21\fsmilli10800 \cf4 \strokec4 \

\f0\b\fs28\fsmilli14400 \cf2 \strokec2 error_log
\f1\b0\fs21\fsmilli10800 \cf4 \strokec4   
\fs28\fsmilli14400 \cf5 \strokec5 logs/error.log\cf4 \strokec4 ;
\fs21\fsmilli10800 \

\f0\b\fs28\fsmilli14400 \cf2 \strokec2 pid
\f1\b0\fs21\fsmilli10800 \cf4 \strokec4         
\fs28\fsmilli14400 \cf5 \strokec5 logs/nginx.pid\cf4 \strokec4 ;
\fs21\fsmilli10800 \

\f0\b\fs28\fsmilli14400 \cf2 \strokec2 worker_rlimit_nofile
\f1\b0\fs21\fsmilli10800 \cf4 \strokec4  
\fs28\fsmilli14400 \cf7 \strokec7 8192\cf4 \strokec4 ;
\fs21\fsmilli10800 \
\

\f0\b\fs28\fsmilli14400 \cf2 \strokec2 events
\f1\b0\fs21\fsmilli10800 \cf4 \strokec4  
\fs28\fsmilli14400 \{
\fs21\fsmilli10800 \
  
\f0\b\fs28\fsmilli14400 \cf2 \strokec2 worker_connections
\f1\b0\fs21\fsmilli10800 \cf4 \strokec4   
\fs28\fsmilli14400 \cf7 \strokec7 4096\cf4 \strokec4 ;
\fs21\fsmilli10800   
\f2\i\fs28\fsmilli14400 \cf6 \strokec6 ## Default: 1024
\f1\i0\fs21\fsmilli10800 \cf4 \strokec4 \
\pard\pardeftab720\partightenfactor0

\fs28\fsmilli14400 \cf4 \}
\fs21\fsmilli10800 \
\
\pard\pardeftab720\partightenfactor0

\f0\b\fs28\fsmilli14400 \cf2 \strokec2 http
\f1\b0\fs21\fsmilli10800 \cf4 \strokec4  
\fs28\fsmilli14400 \{
\fs21\fsmilli10800 \
  
\f0\b\fs28\fsmilli14400 \cf2 \strokec2 include
\f1\b0\fs21\fsmilli10800 \cf4 \strokec4     
\fs28\fsmilli14400 \cf5 \strokec5 conf/mime.types\cf4 \strokec4 ;
\fs21\fsmilli10800 \
  
\f0\b\fs28\fsmilli14400 \cf2 \strokec2 include
\f1\b0\fs21\fsmilli10800 \cf4 \strokec4     
\fs28\fsmilli14400 \cf5 \strokec5 /etc/nginx/proxy.conf\cf4 \strokec4 ;
\fs21\fsmilli10800 \
  
\f0\b\fs28\fsmilli14400 \cf2 \strokec2 include
\f1\b0\fs21\fsmilli10800 \cf4 \strokec4     
\fs28\fsmilli14400 \cf5 \strokec5 /etc/nginx/fastcgi.conf\cf4 \strokec4 ;
\fs21\fsmilli10800 \
  
\f0\b\fs28\fsmilli14400 \cf2 \strokec2 index
\f1\b0\fs21\fsmilli10800 \cf4 \strokec4     
\fs28\fsmilli14400 \cf5 \strokec5 index.html
\fs21\fsmilli10800 \cf4 \strokec4  
\fs28\fsmilli14400 \cf5 \strokec5 index.htm
\fs21\fsmilli10800 \cf4 \strokec4  
\fs28\fsmilli14400 \cf5 \strokec5 index.php\cf4 \strokec4 ;
\fs21\fsmilli10800 \
\
  
\f0\b\fs28\fsmilli14400 \cf2 \strokec2 default_type
\f1\b0\fs21\fsmilli10800 \cf4 \strokec4  
\fs28\fsmilli14400 \cf5 \strokec5 application/octet-stream\cf4 \strokec4 ;
\fs21\fsmilli10800 \
  
\f0\b\fs28\fsmilli14400 \cf2 \strokec2 log_format
\f1\b0\fs21\fsmilli10800 \cf4 \strokec4    
\fs28\fsmilli14400 \cf5 \strokec5 main
\fs21\fsmilli10800 \cf4 \strokec4  
\fs28\fsmilli14400 \cf5 \strokec5 '\cf8 \strokec8 $remote_addr
\fs21\fsmilli10800 \cf4 \strokec4  
\fs28\fsmilli14400 \cf5 \strokec5 -
\fs21\fsmilli10800 \cf4 \strokec4  
\fs28\fsmilli14400 \cf8 \strokec8 $remote_user
\fs21\fsmilli10800 \cf4 \strokec4  
\fs28\fsmilli14400 \cf5 \strokec5 [\cf8 \strokec8 $time_local]
\fs21\fsmilli10800 \cf4 \strokec4   
\fs28\fsmilli14400 \cf8 \strokec8 $status
\fs21\fsmilli10800 \cf4 \strokec4  
\fs28\fsmilli14400 \cf5 \strokec5 '
\fs21\fsmilli10800 \cf4 \strokec4 \
    
\fs28\fsmilli14400 \cf5 \strokec5 '"\cf8 \strokec8 $request"
\fs21\fsmilli10800 \cf4 \strokec4  
\fs28\fsmilli14400 \cf8 \strokec8 $body_bytes_sent
\fs21\fsmilli10800 \cf4 \strokec4  
\fs28\fsmilli14400 \cf5 \strokec5 "\cf8 \strokec8 $http_referer"
\fs21\fsmilli10800 \cf4 \strokec4  
\fs28\fsmilli14400 \cf5 \strokec5 '
\fs21\fsmilli10800 \cf4 \strokec4 \
    
\fs28\fsmilli14400 \cf5 \strokec5 '"\cf8 \strokec8 $http_user_agent"
\fs21\fsmilli10800 \cf4 \strokec4  
\fs28\fsmilli14400 \cf5 \strokec5 "\cf8 \strokec8 $http_x_forwarded_for"'\cf4 \strokec4 ;
\fs21\fsmilli10800 \
  
\f0\b\fs28\fsmilli14400 \cf2 \strokec2 access_log
\f1\b0\fs21\fsmilli10800 \cf4 \strokec4    
\fs28\fsmilli14400 \cf5 \strokec5 logs/access.log
\fs21\fsmilli10800 \cf4 \strokec4   
\fs28\fsmilli14400 \cf5 \strokec5 main\cf4 \strokec4 ;
\fs21\fsmilli10800 \
  
\f0\b\fs28\fsmilli14400 \cf2 \strokec2 sendfile
\f1\b0\fs21\fsmilli10800 \cf4 \strokec4      
\fs28\fsmilli14400 \cf9 \strokec9 on\cf4 \strokec4 ;
\fs21\fsmilli10800 \
  
\f0\b\fs28\fsmilli14400 \cf2 \strokec2 tcp_nopush
\f1\b0\fs21\fsmilli10800 \cf4 \strokec4    
\fs28\fsmilli14400 \cf9 \strokec9 on\cf4 \strokec4 ;
\fs21\fsmilli10800 \
  
\f0\b\fs28\fsmilli14400 \cf2 \strokec2 server_names_hash_bucket_size
\f1\b0\fs21\fsmilli10800 \cf4 \strokec4  
\fs28\fsmilli14400 \cf7 \strokec7 128\cf4 \strokec4 ;
\fs21\fsmilli10800  
\f2\i\fs28\fsmilli14400 \cf6 \strokec6 # this seems to be required for some vhosts
\f1\i0\fs21\fsmilli10800 \cf4 \strokec4 \
\
  
\f0\b\fs28\fsmilli14400 \cf2 \strokec2 server
\f1\b0\fs21\fsmilli10800 \cf4 \strokec4  
\fs28\fsmilli14400 \{
\fs21\fsmilli10800  
\f2\i\fs28\fsmilli14400 \cf6 \strokec6 # php/fastcgi
\f1\i0\fs21\fsmilli10800 \cf4 \strokec4 \
    
\f0\b\fs28\fsmilli14400 \cf2 \strokec2 listen
\f1\b0\fs21\fsmilli10800 \cf4 \strokec4        
\fs28\fsmilli14400 \cf7 \strokec7 80\cf4 \strokec4 ;
\fs21\fsmilli10800 \
    
\f0\b\fs28\fsmilli14400 \cf2 \strokec2 server_name
\f1\b0\fs21\fsmilli10800 \cf4 \strokec4   
\fs28\fsmilli14400 \cf5 \strokec5 domain1.com
\fs21\fsmilli10800 \cf4 \strokec4  
\fs28\fsmilli14400 \cf5 \strokec5 www.domain1.com\cf4 \strokec4 ;
\fs21\fsmilli10800 \
    
\f0\b\fs28\fsmilli14400 \cf2 \strokec2 access_log
\f1\b0\fs21\fsmilli10800 \cf4 \strokec4    
\fs28\fsmilli14400 \cf5 \strokec5 logs/domain\cf7 \strokec7 1\cf5 \strokec5 .access.log
\fs21\fsmilli10800 \cf4 \strokec4   
\fs28\fsmilli14400 \cf5 \strokec5 main\cf4 \strokec4 ;
\fs21\fsmilli10800 \
    
\f0\b\fs28\fsmilli14400 \cf2 \strokec2 root
\f1\b0\fs21\fsmilli10800 \cf4 \strokec4          
\fs28\fsmilli14400 \cf5 \strokec5 html\cf4 \strokec4 ;
\fs21\fsmilli10800 \
\
    
\f0\b\fs28\fsmilli14400 \cf2 \strokec2 location
\f1\b0\fs21\fsmilli10800 \cf4 \strokec4  
\fs28\fsmilli14400 ~
\fs21\fsmilli10800  
\fs28\fsmilli14400 \cf10 \strokec10 \\.php$
\fs21\fsmilli10800 \cf4 \strokec4  
\fs28\fsmilli14400 \{
\fs21\fsmilli10800 \
      
\f0\b\fs28\fsmilli14400 \cf2 \strokec2 fastcgi_pass
\f1\b0\fs21\fsmilli10800 \cf4 \strokec4    
\fs28\fsmilli14400 127.0.0.1:\cf7 \strokec7 1025\cf4 \strokec4 ;
\fs21\fsmilli10800 \
    
\fs28\fsmilli14400 \}
\fs21\fsmilli10800 \
  
\fs28\fsmilli14400 \}
\fs21\fsmilli10800 \
\
  
\f0\b\fs28\fsmilli14400 \cf2 \strokec2 server
\f1\b0\fs21\fsmilli10800 \cf4 \strokec4  
\fs28\fsmilli14400 \{
\fs21\fsmilli10800  
\f2\i\fs28\fsmilli14400 \cf6 \strokec6 # simple reverse-proxy
\f1\i0\fs21\fsmilli10800 \cf4 \strokec4 \
    
\f0\b\fs28\fsmilli14400 \cf2 \strokec2 listen
\f1\b0\fs21\fsmilli10800 \cf4 \strokec4        
\fs28\fsmilli14400 \cf7 \strokec7 80\cf4 \strokec4 ;
\fs21\fsmilli10800 \
    
\f0\b\fs28\fsmilli14400 \cf2 \strokec2 server_name
\f1\b0\fs21\fsmilli10800 \cf4 \strokec4   
\fs28\fsmilli14400 \cf5 \strokec5 domain2.com
\fs21\fsmilli10800 \cf4 \strokec4  
\fs28\fsmilli14400 \cf5 \strokec5 www.domain2.com\cf4 \strokec4 ;
\fs21\fsmilli10800 \
    
\f0\b\fs28\fsmilli14400 \cf2 \strokec2 access_log
\f1\b0\fs21\fsmilli10800 \cf4 \strokec4    
\fs28\fsmilli14400 \cf5 \strokec5 logs/domain\cf7 \strokec7 2\cf5 \strokec5 .access.log
\fs21\fsmilli10800 \cf4 \strokec4   
\fs28\fsmilli14400 \cf5 \strokec5 main\cf4 \strokec4 ;
\fs21\fsmilli10800 \
\
    
\f2\i\fs28\fsmilli14400 \cf6 \strokec6 # serve static files
\f1\i0\fs21\fsmilli10800 \cf4 \strokec4 \
    
\f0\b\fs28\fsmilli14400 \cf2 \strokec2 location
\f1\b0\fs21\fsmilli10800 \cf4 \strokec4  
\fs28\fsmilli14400 ~
\fs21\fsmilli10800  
\fs28\fsmilli14400 \cf10 \strokec10 ^/(images|javascript|js|css|flash|media|static)/
\fs21\fsmilli10800 \cf4 \strokec4   
\fs28\fsmilli14400 \{
\fs21\fsmilli10800 \
      
\f0\b\fs28\fsmilli14400 \cf2 \strokec2 root
\f1\b0\fs21\fsmilli10800 \cf4 \strokec4     
\fs28\fsmilli14400 \cf5 \strokec5 /var/www/virtual/big.server.com/htdocs\cf4 \strokec4 ;
\fs21\fsmilli10800 \
      
\f0\b\fs28\fsmilli14400 \cf2 \strokec2 expires
\f1\b0\fs21\fsmilli10800 \cf4 \strokec4  
\fs28\fsmilli14400 \cf5 \strokec5 30d\cf4 \strokec4 ;
\fs21\fsmilli10800 \
    
\fs28\fsmilli14400 \}
\fs21\fsmilli10800 \
\
    
\f2\i\fs28\fsmilli14400 \cf6 \strokec6 # pass requests for dynamic content to rails/turbogears/zope, et al
\f1\i0\fs21\fsmilli10800 \cf4 \strokec4 \
    
\f0\b\fs28\fsmilli14400 \cf2 \strokec2 location
\f1\b0\fs21\fsmilli10800 \cf4 \strokec4  
\fs28\fsmilli14400 \cf5 \strokec5 /
\fs21\fsmilli10800 \cf4 \strokec4  
\fs28\fsmilli14400 \{
\fs21\fsmilli10800 \
      
\f0\b\fs28\fsmilli14400 \cf2 \strokec2 proxy_pass
\f1\b0\fs21\fsmilli10800 \cf4 \strokec4       
\fs28\fsmilli14400 \cf5 \strokec5 http://127.0.0.1:8080\cf4 \strokec4 ;
\fs21\fsmilli10800 \
    
\fs28\fsmilli14400 \}
\fs21\fsmilli10800 \
  
\fs28\fsmilli14400 \}
\fs21\fsmilli10800 \
\
  
\f0\b\fs28\fsmilli14400 \cf2 \strokec2 upstream
\f1\b0\fs21\fsmilli10800 \cf4 \strokec4  
\fs28\fsmilli14400 \cf5 \strokec5 big_server_com
\fs21\fsmilli10800 \cf4 \strokec4  
\fs28\fsmilli14400 \{
\fs21\fsmilli10800 \
    
\f0\b\fs28\fsmilli14400 \cf2 \strokec2 server
\f1\b0\fs21\fsmilli10800 \cf4 \strokec4  
\fs28\fsmilli14400 127.0.0.3:\cf7 \strokec7 8000
\fs21\fsmilli10800 \cf4 \strokec4  
\fs28\fsmilli14400 \cf5 \strokec5 weight=5\cf4 \strokec4 ;
\fs21\fsmilli10800 \
    
\f0\b\fs28\fsmilli14400 \cf2 \strokec2 server
\f1\b0\fs21\fsmilli10800 \cf4 \strokec4  
\fs28\fsmilli14400 127.0.0.3:\cf7 \strokec7 8001
\fs21\fsmilli10800 \cf4 \strokec4  
\fs28\fsmilli14400 \cf5 \strokec5 weight=5\cf4 \strokec4 ;
\fs21\fsmilli10800 \
    
\f0\b\fs28\fsmilli14400 \cf2 \strokec2 server
\f1\b0\fs21\fsmilli10800 \cf4 \strokec4  
\fs28\fsmilli14400 192.168.0.1:\cf7 \strokec7 8000\cf4 \strokec4 ;
\fs21\fsmilli10800 \
    
\f0\b\fs28\fsmilli14400 \cf2 \strokec2 server
\f1\b0\fs21\fsmilli10800 \cf4 \strokec4  
\fs28\fsmilli14400 192.168.0.1:\cf7 \strokec7 8001\cf4 \strokec4 ;
\fs21\fsmilli10800 \
  
\fs28\fsmilli14400 \}
\fs21\fsmilli10800 \
\
  
\f0\b\fs28\fsmilli14400 \cf2 \strokec2 server
\f1\b0\fs21\fsmilli10800 \cf4 \strokec4  
\fs28\fsmilli14400 \{
\fs21\fsmilli10800  
\f2\i\fs28\fsmilli14400 \cf6 \strokec6 # simple load balancing
\f1\i0\fs21\fsmilli10800 \cf4 \strokec4 \
    
\f0\b\fs28\fsmilli14400 \cf2 \strokec2 listen
\f1\b0\fs21\fsmilli10800 \cf4 \strokec4           
\fs28\fsmilli14400 \cf7 \strokec7 80\cf4 \strokec4 ;
\fs21\fsmilli10800 \
    
\f0\b\fs28\fsmilli14400 \cf2 \strokec2 server_name
\f1\b0\fs21\fsmilli10800 \cf4 \strokec4      
\fs28\fsmilli14400 \cf5 \strokec5 big.server.com\cf4 \strokec4 ;
\fs21\fsmilli10800 \
    
\f0\b\fs28\fsmilli14400 \cf2 \strokec2 access_log
\f1\b0\fs21\fsmilli10800 \cf4 \strokec4       
\fs28\fsmilli14400 \cf5 \strokec5 logs/big.server.access.log
\fs21\fsmilli10800 \cf4 \strokec4  
\fs28\fsmilli14400 \cf5 \strokec5 main\cf4 \strokec4 ;
\fs21\fsmilli10800 \
\
    
\f0\b\fs28\fsmilli14400 \cf2 \strokec2 location
\f1\b0\fs21\fsmilli10800 \cf4 \strokec4  
\fs28\fsmilli14400 \cf5 \strokec5 /
\fs21\fsmilli10800 \cf4 \strokec4  
\fs28\fsmilli14400 \{
\fs21\fsmilli10800 \
      
\f0\b\fs28\fsmilli14400 \cf2 \strokec2 proxy_pass
\f1\b0\fs21\fsmilli10800 \cf4 \strokec4       
\fs28\fsmilli14400 \cf5 \strokec5 http://big_server_com\cf4 \strokec4 ;
\fs21\fsmilli10800 \
    
\fs28\fsmilli14400 \}
\fs21\fsmilli10800 \
  
\fs28\fsmilli14400 \}
\fs21\fsmilli10800 \
\pard\pardeftab720\partightenfactor0

\fs28\fsmilli14400 \cf4 \}
\fs21\fsmilli10800 \
}